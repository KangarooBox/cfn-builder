{{!--
  Create a subnet in an existing VPC.

  http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet.html
 --}}

{{#each this.AZs}}
"e2sn{{../Name}}{{this}}":{
  "Type":"AWS::EC2::Subnet",
  "Properties":{
    "AvailabilityZone": "{{@root.Region.Id}}{{this}}",
    {{> vpcid ../this}},
    {{#with (lookupByAZ (lookupByNode @root.Region.SubnetAddresses ../Name) this)}}
    "CidrBlock":"{{this.CidrBlock}}",
    {{/with}}
    {{> tags Name=(concat @root.EnvVersion @root.EnvName " " ../Name " " this)}}
  }
}{{#unless @last}},{{/unless}}
{{/each}}

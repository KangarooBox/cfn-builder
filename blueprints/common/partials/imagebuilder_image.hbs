{{!--
  Creates an Image Builder Image
https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-imagebuilder-image.html
--}}

"imgbldrimg{{sanitize this.Name ''}}": {
  "Type": "AWS::ImageBuilder::Image",
  "Properties": {
    "ImageRecipeArn": {"Ref": "imgbldrimgrecip{{sanitize this.ImageRecipeArn ''}}"},
    "InfrastructureConfigurationArn": {"Ref": "imgbldrinfaconf{{sanitize this.InfrastructureConfigurationArn ''}}"},

      {{#if this.ImageTestsConfiguration}}
        "ImageTestsConfiguration": { {{{inject this.ImageTestsConfiguration}}} },
      {{/if}}

      {{#if this.EnhancedImageMetadataEnabled}}
        "EnhancedImageMetadataEnabled": {{default (toString this.EnhancedImageMetadataEnabled) false}},
      {{/if}}

      {{#if this.DistributionConfigurationArn}}
        "DistributionConfigurationArn": {"Ref": "imgbldrdistconf{{sanitize this.DistributionConfigurationArn ''}}"},
      {{/if}}

      {{> tags_map}}
    }
}

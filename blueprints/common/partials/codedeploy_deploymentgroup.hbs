{{!--
  Creates an AWS CodeDeploy deployment group that specifies which instances your application
  revisions are deployed to, along with other deployment options

  https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-codedeploy-deploymentgroup.html
 --}}
"cddg{{this.Name}}": {
  "Type": "AWS::CodeDeploy::DeploymentGroup",
  "Properties": {
    {{!-- "AlarmConfiguration": AlarmConfiguration, --}}
    {{!-- "AutoRollbackConfiguration": AutoRollbackConfiguration, --}}
    {{!-- "DeploymentConfigName": String, --}}
    {{!-- "DeploymentStyle": DeploymentStyle, --}}
    {{!-- "Ec2TagFilters": [ Ec2TagFilter, ... ], --}}
    {{!-- "Ec2TagSet": Ec2TagSet, --}}
    {{!-- "LoadBalancerInfo": LoadBalancerInfo, --}}
    {{!-- "OnPremisesInstanceTagFilters": [ OnPremisesInstanceTagFilter, ... ], --}}
    {{!-- "OnPremisesInstanceTagSet": OnPremisesInstanceTagSet, --}}
    {{!-- "TriggerConfigurations": [ TriggerConfig, ... ] --}}
    {{#if this.Deployment}}"Deployment": { {{{inject this.Deployment}}} },{{/if}}
    "AutoScalingGroups": [
      {{#each this.AutoScalingGroups}}{"Ref":"asg{{this}}"}{{#unless @last}},{{/unless}}{{/each}}
    ],
    "ServiceRoleArn": {{#startsWith "arn:aws:" this.ServiceRoleArn}}"{{this.ServiceRoleArn}}"
      {{else}}{"Fn::GetAtt":["iamr{{this.ServiceRoleArn}}","Arn"]}
    {{/startsWith}},
    "DeploymentGroupName": "{{this.Name}}",
    "ApplicationName": "{{sanitize this.ApplicationName '_'}}"
  }
}
